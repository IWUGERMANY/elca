"undefined"!=typeof jQuery&&$(window).load(function(){jBlibs.App.init({debug:!1,updateHashUrlCssClass:"page",initialize:function(){},controllers:{importAssistant:{urls:/^\/importAssistant/,controls:{"a:not(.no-xhr):not([rel])":{click:function(){return $(this).attr("href")}}},views:{"#content.project-import.import-assistant":"prepareContent","#content.admin-mappings":["prepareContent","prepareAdminMappings"],"#content.admin-mapping-edit":"prepareAdminEditMapping","#adminMaterialMappings":null,".import-assistant-mapping-selector":"prepareAdminEditMapping"},prepareContent:function(){$(".tab-item").not(".active").hide(),$(".elca-tab a").on("click",function(e){e.preventDefault();var href=$(this).attr("href");return $(".elca-tab").removeClass("active"),$(this).closest(".elca-tab").addClass("active"),$(".tab-item").hide(),$(href).show(),$('form input[name="activeTab"]').val($(href).attr("id")),!1})},prepareAdminMappings:function(){var $adminMaterialMappings=$("#adminMaterialMappings"),me=this,table=$adminMaterialMappings.DataTable({dom:'<"dt-wrapper"flpBtip>',lengthMenu:[[25,50,100],[25,50,100]],ajax:{url:"/importAssistant/admin/mappings/json/",dataSrc:"mappings"},columns:[{data:"materialName"},{data:"processConfig"},{data:"epdSubTypes"},{data:"processDbs"},{data:"mappingMode"},{data:"id",orderable:!1,render:function(data){return'<a class="delete-mapping" href="/importAssistant/admin/mappings/delete/?id='+data+'">'+$adminMaterialMappings.data("delete-caption")+'</a> | <a class="page edit-mapping default" href="/importAssistant/admin/mappings/edit/?id='+data+'">'+$adminMaterialMappings.data("edit-caption")+"</a>"}}],stateSave:!0,drawCallback:function(){me._prepare($adminMaterialMappings)},autoWidth:!1,language:{lengthMenu:$adminMaterialMappings.data("per-page-caption"),zeroRecords:$adminMaterialMappings.data("zero-records-caption"),info:$adminMaterialMappings.data("current-page-caption"),infoEmpty:$adminMaterialMappings.data("zero-records-caption"),search:$adminMaterialMappings.data("search-caption"),paginate:{first:$adminMaterialMappings.data("first-caption"),last:$adminMaterialMappings.data("last-caption"),next:$adminMaterialMappings.data("next-caption"),previous:$adminMaterialMappings.data("previous-caption")},buttons:{selectNone:$adminMaterialMappings.data("select-none-caption")},select:{rows:{1:$adminMaterialMappings.data("selected-row-caption"),0:"",_:$adminMaterialMappings.data("selected-rows-caption")}}},select:{style:"multi",selector:"td:not(:last-child)"},buttons:["selectNone",{name:"deleteSelected",text:$adminMaterialMappings.data("delete-selected-caption"),action:function(){var selected=table.rows({selected:!0}),data=selected.data().toArray(),ids=data.map(function(a){return a.id});jBlibs.App.query("/importAssistant/admin/mappings/deleteMultiple/",{ids:ids},{httpMethod:"POST"})},enabled:!1}]});$adminMaterialMappings.on("select.dt deselect.dt",function(){table.rows({selected:!0}).count()>0?table.button(1).enable():table.button(1).disable()})},prepareAdminEditMapping:function($context){function checkModeVisibility(){var mode=$("#mappingMode input:checked").val();"1"===mode?($multipleMappings.hide(),$siblingMappings.show(),$siblingRatios.show()):"2"===mode?($multipleMappings.show(),$siblingMappings.show(),$siblingRatios.hide()):($multipleMappings.hide(),$siblingMappings.hide(),$siblingRatios.hide())}var $siblingMappings=$("#siblingMappings"),$multipleMappings=$("#multipleMappings"),$siblingRatios=$(".siblingRatio",$context);checkModeVisibility(),$("#mappingMode input").on("change",function(){checkModeVisibility()});var $siblingRatio1=$('input[name="siblingRatio[0]"]',$context),$siblingRatio2=$('input[name="siblingRatio[1]"]',$context);$siblingRatio1.on("change",function(){$siblingRatio2.val(100-Math.max(0,Math.min(100,$siblingRatio1.val())))}),$siblingRatio2.on("change",function(){$siblingRatio1.val(100-Math.max(0,Math.min(100,$siblingRatio2.val())))}),$("input:not(.mark-no-change),textarea:not(.mark-no-change),select:not(.mark-no-change)",$context).on("change input",function(){$(this).closest("form.highlight-changes").length<1||($(this).addClass("changed"),$(this.form).addClass("changed"))}),$(".changed",$context).length&&$(".changed",$context).eq(0).closest("form.highlight-changes").addClass("changed")}}}})});